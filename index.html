<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="./img/pokeball.png" type="image/x-icon">
    <title>POKEDEX</title>
</head>

<body>
    <header >
        <img src="./img/pokemon-logo-1-1.png" alt="pokemon-logo" class="pokemon-logo">
    </header>
    <main>
        <div id="pokemonList">
            <!-- EXIBIDO PELO JAVASCRIPT -->
        </div>
    </main>

    <script>
        async function fetchPokemonData() {
                const response = await fetch("https://pokeapi.co/api/v2/pokemon?limit=30");
                const data = await response.json();

                for (const pokemon of data.results) {
                    const pokemonResponse = await fetch(pokemon.url);
                    const pokemonData = await pokemonResponse.json();

                    // Exibe os dados na tela
                    const pokemonContainer = informacoesPokemons(pokemonData);

                    // Adicionar a div do Pokémon à lista de Pokémon
                    const pokemonList = document.getElementById("pokemonList");
                    pokemonList.appendChild(pokemonContainer);

                    // Aplica estilos
                    tipoPokemon(pokemonContainer, pokemonData);
                }
        }

        function tipoPokemon(pokemonCard, pokemonData) {
            const tiposElement = pokemonCard.querySelector('.tipos');
            const types = pokemonData.types.map(type => type.type.name);

            if (types.includes('grass')) {
                tiposElement.style.backgroundColor = "#7ac74c";

            } else if (types.includes('poison')) {
                tiposElement.style.backgroundColor = "#df67ddfb";

            } else if (types.includes('fire')) {
                tiposElement.style.backgroundColor = "#ee8130";

            } else if (types.includes('water')) {
                tiposElement.style.backgroundColor = "#6390f0";

            } else if (types.includes('bug')) {
                tiposElement.style.backgroundColor = "#a6b91a";

            } else if (types.includes('flying')) {
                tiposElement.style.background = "linear-gradient(to bottom, #6390f0 50%, gray 50%)";

            }else if (types.includes('electric')) {
                tiposElement.style.backgroundColor = "#e6c972";

            }else if (types.includes('ground')) {
                tiposElement.style.backgroundColor = "#9b7653";

            }else if (types.includes('normal')) {
                tiposElement.style.backgroundColor = "#d9dddc";
            }
        }

        function informacoesPokemons(pokemonData) {
            // Capturando id da div no html
            const pokemonList = document.getElementById("pokemonList");

            // Criar elementos HTML
            const pokemonContainer = document.createElement("div");
            pokemonContainer.classList.add("pokemon");

            const types = pokemonData.types.map(type => type.type.name);
            const abilities = pokemonData.abilities.map(ability => ability.ability.name).join(", ");

            const pokemonCard = document.createElement("div");

            pokemonCard.innerHTML =
                `<ul class="listagem-pokemon">
                    <li class="cartao-pokemon">
                        <div class="informacoes">
                            <h2>Nome: <strong>${pokemonData.name}</strong> </h2>
                            <p>ID: ${pokemonData.id}</p>
                        </div>
                        <img src=${pokemonData.sprites.front_default} alt=${pokemonData.name} class="imagem">
                        <ul class="tipos">
                            <p>Tipo: ${types.join(", ")} </p>
                        </ul>
                        <p class="descricao" ><strong>Habilidades:</strong> ${abilities}</p>
                    </li>
                </ul>`;
            
            // Adicionar os elementos à div de informações do Pokémon
            pokemonContainer.appendChild(pokemonCard);

            return pokemonContainer;
        }

        fetchPokemonData();
    </script>

</body>

</html>
